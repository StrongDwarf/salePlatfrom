# 在正常开发接口前你需要知道什么?

## restful API简介

在现在的前后端分离式的开发中,前后端的通信只使用restful API接口进行通信,而不使用其他方式通信。  
restful API主要使用HTTP协议中的get和post协议实现,如实现一个用户登录的API,可以在后端实现一个如下接口:  

``` java
方法:post  接口:  hostname/api/login  
其中hostname是主机名称,形如www.baidu.com
```

在restful API设计中,前后端通信严格使用json数据格式,其中json数据格式是形如下面这样的数据,其中属性名称智能是字符串,而属性值可以是String,Number,Array,Object,类型。

``` javascript
//数据
data = {
    propertyName1:propertyValue1;  //属性名:属性值  如name:xiaobaicai,
    propertyName2:propertyValue2;
    ...
}
```

## 实现登录API
在实现这个API前我需要学什么?
 * 学习前端AJAX技术,并会使用它进行测试
 * 学习mysql技术,能够实现, 创建数据库,在数据库中创建表,查询表,
 * 学习java技术,并能够使用java链接mysql数据库,使用java进行mysql数据库操作
 * 学习java网络操作相关技术(这里自己封装麻烦,可学习tomcat服务器),并能够实现get请求和post请求。

在实现用户登录API接口时,我们很容易可以想到,客户端可以向服务器发送包含用户名和密码的数据,然后服务器端将该信息和数据库中的数据进行比对,返回登录成功或者登录失败的数据。具体如下:

``` javascript
//客户端发送给服务器端的数据可以如下:
{
    id:123456,
    pass:xiaobaicai123
}
,
//服务器端发送给客户端的数据可以如下:其中token是用于客户端向服务器端请求数据的身份令牌,每个客户端拥有的token都不一样。
{
    code:200,
    message:"登录成功",
    type:1,
    data:{
        token:asafc3487547852866sadwa;
    }
}
//或者当用户未注册时候返回如下
{
    code:200,
    message:"用户未注册",
    type:2,
    data:{}
}
//或者当密码错误时返回如下
{
    code:200,
    message:"密码错误",
    type:3,
    data:{}
}
//当发生其他情况时候,如数据库查询时发生Exception，返回如下:
{
    code:500,
    message:"数据库查询出错",
    type:0,
    data:{}
}
```

## 扩展实现可多用户同时访问的API,

在实现这个可多用户访问的API前我需要学习什么？
 * 学习操作系统中生产者消费者相关知识,知道怎样加锁。
 * 编写一段当一个线程在执行数据库操作时,另一个线程就不能执行数据库操作的代码
 * 重写上一节中实现的登录API,实现当一个请求请求了登录, 另一个请求的登录就需要等该请求的数据库操作执行完毕后再查询数据库(这里测试可以使用前一个请求在查询过程中sleep了2s测试)。

## 扩展实现存储在内存中的token字典,可以快速的检索token对应的userid的值

在实现这个之前我需要学什么?
 * 不需要学什么,可以看看数据结构中的排序,比较不同排序的时间复杂度度,

在内存中保存一个字典,字典中保存的值如:  token值:token对应的id值, 输入对于的token可以快速查询出id。

## 思考后端代码架构,

一个程序说简单也简单,说复杂也复杂,看人怎么写,
在实际编程之前,最好先思考清楚,哪些代码应该放在哪些层。当然这里也可以学习一些框架如spring来管理代码。看自己选择把。

## 编写实际使用的API,

以后写.. 
